(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){},106:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),o=n(27),i=n.n(o),s=(n(68),n(19)),u=n(20),c=n(22),l=n(21),f=n(23),m=(n(70),n(34)),p=n.n(m),d=n(14),g=function(e){return r.a.createElement("header",{className:p.a.header},r.a.createElement("img",{className:p.a.rotate,src:n(73),alt:""}),r.a.createElement("div",{className:p.a.loginBlock},r.a.createElement("div",null,e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{onClick:e.logout},"Logout")):r.a.createElement(d.b,{to:"/login"},"Login")),r.a.createElement("img",{src:e.photo?e.photo:n(36),alt:""})))},h=n(12),E=n(2),v=n.n(E),b=n(10),w=n(4),_=n(5),O={id:null,login:null,email:null,isFetching:!1,isAuth:!1,photo:null},S=function(e,t,n,a){return{type:"samurai-network/auth/SET_USER_DATA",payload:{id:e,email:t,login:n,isAuth:a}}},P=function(e){return{type:"SET_USER_PHOTO",photo:e}},N=function(){return function(){var e=Object(b.a)(v.a.mark(function e(t){var n,a,r,o,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.getAuthUserData();case 2:if(0!==(n=e.sent).resultCode){e.next=10;break}return a=n.data,r=a.id,o=a.email,i=a.login,t(S(r,o,i,!0)),e.next=8,_.a.getAuthUserPhoto(r);case 8:s=e.sent,t(P(s));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"samurai-network/auth/SET_USER_DATA":return Object(w.a)({},e,t.payload);case"SET_USER_PHOTO":return Object(w.a)({},e,{photo:t.photo});default:return e}},C=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g,this.props)}}]),t}(r.a.Component),y=Object(h.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,photo:e.auth.photo}},{logout:function(){return function(){var e=Object(b.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.logout();case 2:0===e.sent.resultCode&&t(S(null,null,null,!1));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(C),U=n(6),I=n.n(U),k=Object(h.b)(function(e){return{navbarItems:e.navbar.navbarItems}},{})(function(e){var t=e.navbarItems.map(function(e){return"Friends"!==e.navItem?r.a.createElement("div",{className:I.a.item,key:e.id},r.a.createElement(d.b,{to:e.path,activeClassName:I.a.active},e.navItem)):r.a.createElement("div",{className:I.a.item,key:e.id},r.a.createElement(d.b,{to:e.path,activeClassName:I.a.active,className:I.a.friends},e.navItem),r.a.createElement("div",{className:I.a.friends,key:e.id},r.a.createElement("div",{className:I.a.friendsItem},r.a.createElement("img",{src:"https://img.icons8.com/officel/2x/person-male.png",alt:""}),r.a.createElement("div",{className:I.a.friendName},"Amir")),r.a.createElement("div",{className:I.a.friendsItem},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT8Uj8PEy35g6znv1EvEacrBFRjreA8kpqHnw&usqp=CAU",alt:""}),r.a.createElement("div",{className:I.a.friendName},"Islam")),r.a.createElement("div",{className:I.a.friendsItem},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpd4mJRIUwqgE8D_Z2znANEbtiz4GhI4M8NQ&usqp=CAU",alt:""}),r.a.createElement("div",{className:I.a.friendName},"Zaman"))))});return r.a.createElement("nav",{className:I.a.nav},t)}),T=n(25),A=function(e,t,n,a){return e.map(function(e){return e[n]===t?Object(w.a)({},e,a):e})},z={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingProcess:[]},L=function(e){return{type:"FOLLOW",userId:e}},x=function(e){return{type:"UNFOLLOW",userId:e}},F=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},R=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},G=function(e,t){return{type:"TOGGLE_FOLLOWING_PROCESS",isFetching:e,userId:t}},D=function(){var e=Object(b.a)(v.a.mark(function e(t,n,a,r){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(G(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(r(n)),t(G(!1,n));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(w.a)({},e,{users:A(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(w.a)({},e,{users:A(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(w.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(w.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(w.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(w.a)({},e,{isFetching:t.isFetching});case"TOGGLE_FOLLOWING_PROCESS":return Object(w.a)({},e,{followingProcess:t.isFetching?Object(T.a)(e.followingProcess).concat([t.userId]):e.followingProcess.filter(function(e){return e!==t.userId})});default:return e}},q=n(30),H=n(42),B=n(40),W=n.n(B),Z=n(57),J=n.n(Z),X=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],o=1;o<=t;o++)n.push(o);var i=Math.ceil(t/e.portionSize),s=Object(a.useState)(1),u=Object(H.a)(s,2),c=u[0],l=u[1],f=(c-1)*e.portionSize+1,m=c*e.portionSize;return r.a.createElement("div",{className:W.a.numbers},c>1&&r.a.createElement("button",{onClick:function(){l(c-1)}},"PREV"),n.filter(function(e){return e>=f&&e<=m}).map(function(t){return r.a.createElement("span",{className:J()(Object(q.a)({},W.a.selectedPage,e.currentPage===t)),onClick:function(){e.onPageChanged(t)}},t)}),i>c&&r.a.createElement("button",{onClick:function(){l(c+1)}},"NEXT"))},V=n(31),Q=n.n(V),$=n(36),K=n.n($),Y=function(e){var t=e.user,n=e.followingProcess,a=e.follow,o=e.unfollow;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(d.b,{to:"/profile/"+t.id},r.a.createElement("img",{className:Q.a.userPhoto,src:null!=t.photos.small?t.photos.small:K.a,alt:""}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:n.some(function(e){return e===t.id}),onClick:function(){o(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:n.some(function(e){return e===t.id}),onClick:function(){a(t.id)}},"Follow")),r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status),r.a.createElement("br",null))},ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,portionSize:10}),r.a.createElement("div",null,e.users.map(function(t){return r.a.createElement(Y,{key:t.id,user:t,followingProcess:e.followingProcess,unfollow:e.unfollow,follow:e.follow})})),r.a.createElement(X,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,portionSize:10}))},te=n(29),ne=n(13),ae=n(59),re=Object(ae.a)(function(e){return e.usersPage.users},function(e){return e.filter(function(e){return!0})}),oe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){var t=n.props.pageSize;n.props.getUsers(e,t)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(te.a,null):null,r.a.createElement(ee,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingProcess:this.props.followingProcess}))}}]),t}(r.a.Component),ie=Object(ne.d)(Object(h.b)(function(e){return{users:re(e),pageSize:function(e){return e.usersPage.pageSize}(e),totalUsersCount:function(e){return e.usersPage.totalUsersCount}(e),currentPage:function(e){return e.usersPage.currentPage}(e),isFetching:function(e){return e.usersPage.isFetching}(e),followingProcess:function(e){return e.usersPage.followingProcess}(e)}},{follow:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(n){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:D(n,e,_.c.follow.bind(_.c),L);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(n){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:D(n,e,_.c.unfollow.bind(_.c),x);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:F,toggleFollowingProcess:G,getUsers:function(e,t){return function(){var n=Object(b.a)(v.a.mark(function n(a){var r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(F(e)),a(R(!0)),n.next=4,_.c.getUsers(e,t);case 4:r=n.sent,a(R(!1)),a({type:"SET_USERS",users:r.items}),a({type:"SET_TOTAL_USERS_COUNT",count:r.totalCount});case 8:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}}))(oe),se=(n(104),function(e){return r.a.createElement("div",null,"News")}),ue=(n(106),function(e){return r.a.createElement("div",null,"Music")}),ce=(n(108),function(e){return r.a.createElement("div",null,"Settings")}),le=(n(110),function(e){return r.a.createElement("div",null,"Friends")}),fe=n(1),me=n(18),pe=n.n(me),de=n(54),ge=function(e){return r.a.createElement(de.a,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password||(t.password="Password required"),t},onSubmit:function(t,n){n.setSubmitting;e.login(t.email,t.password,!0)}},function(e){var t=e.values,n=e.errors,a=e.touched,o=e.handleChange,i=e.handleBlur,s=e.handleSubmit,u=e.isSubmitting;return r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:n.email?pe.a.emailError:null},r.a.createElement("input",{className:pe.a.input,type:"email",name:"email",onChange:o,onBlur:i,value:t.email})),r.a.createElement("div",{className:pe.a.error},n.email&&a.email&&n.email),r.a.createElement("div",{className:n.password?pe.a.passwordError:null},r.a.createElement("input",{className:pe.a.input,type:"password",name:"password",onChange:o,onBlur:i,value:t.password})),r.a.createElement("div",{className:pe.a.error},n.password&&a.password&&n.password),r.a.createElement("button",{type:"submit",disabled:u,className:pe.a.button},"Login"))})},he=Object(h.b)(function(e){return{isAuth:e.auth.isAuth}},{login:function(e,t,n){return function(){var a=Object(b.a)(v.a.mark(function a(r){var o;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.login(e,t,n);case 2:0===(o=a.sent).resultCode?r(N()):alert(o.messages);case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}})(function(e){return e.isAuth?r.a.createElement(fe.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(ge,{login:e.login}))}),Ee={initialized:!1},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;switch((arguments.length>1?arguments[1]:void 0).type){case"INITIALIZED_SUCCESS":return Object(w.a)({},e,{initialized:!0});default:return e}},be=n(52),we=n(53),_e={navbarItems:[{id:1,navItem:"Profile",path:"/profile"},{id:2,navItem:"Messages",path:"/dialogs"},{id:3,navItem:"Users",path:"/users"},{id:4,navItem:"News",path:"/news"},{id:5,navItem:"Music",path:"/music"},{id:6,navItem:"Settings",path:"/settings"},{id:7,navItem:"Friends",path:"/friends"}]},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;arguments.length>1&&arguments[1];return e},Se=n(62),Pe=Object(ne.c)({profilePage:be.a,dialogsPage:we.a,navbar:Oe,usersPage:M,auth:j,app:ve}),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d,je=Object(ne.e)(Pe,Ne(Object(ne.a)(Se.a)));window.store=je;var Ce=je,ye=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},r.a.createElement(e,t))}},Ue=r.a.lazy(function(){return n.e(1).then(n.bind(null,125))}),Ie=r.a.lazy(function(){return Promise.all([n.e(4),n.e(2)]).then(n.bind(null,124))}),ke=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(y,null),r.a.createElement(k,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(fe.b,{path:"/profile/:userId?",render:ye(Ie)}),r.a.createElement(fe.b,{path:"/dialogs",render:ye(Ue)}),r.a.createElement(fe.b,{path:"/users",render:function(){return r.a.createElement(ie,null)}}),r.a.createElement(fe.b,{path:"/news",component:se}),r.a.createElement(fe.b,{path:"/music",component:ue}),r.a.createElement(fe.b,{path:"/settings",component:ce}),r.a.createElement(fe.b,{path:"/friends",component:le}),r.a.createElement(fe.b,{path:"/login",component:he}))):r.a.createElement(te.a,null)}}]),t}(r.a.Component),Te=Object(ne.d)(fe.f,Object(h.b)(function(e){return{initialized:e.app.initialized}},{initializeApp:function(){return function(e){e(N()).then(function(){e({type:"INITIALIZED_SUCCESS"})})}}}))(ke),Ae=function(e){return r.a.createElement(d.a,null,r.a.createElement(h.a,{store:Ce},r.a.createElement(Te,null)))};i.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,n){e.exports={input:"Login_input__3hDJC",button:"Login_button__1kpxk",error:"Login_error__JC9Sa",passwordError:"Login_passwordError__1yhda",emailError:"Login_emailError__3JXys"}},29:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(58),i=n.n(o),s=n(31),u=n.n(s);t.a=function(e){return r.a.createElement("img",{className:u.a.spinner,src:i.a,alt:""})}},31:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__2-5T9",spinner:"Users_spinner__1nOat"}},34:function(e,t,n){e.exports={header:"Header_header__1E_mN",rotate:"Header_rotate__1ptbE",rotation:"Header_rotation__26q2z",loginBlock:"Header_loginBlock__3joWP"}},36:function(e,t,n){e.exports=n.p+"static/media/user-icon.7ea4af7d.png"},40:function(e,t,n){e.exports={numbers:"Paginator_numbers__2kqwe",selectedPage:"Paginator_selectedPage__35RXG"}},5:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var a=n(56),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"4c123ef5-4b33-4408-a370-12cbaba4b851"}}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return r.get("/users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},follow:function(e){return r.post("/follow/".concat(e)).then(function(e){return e.data})},unfollow:function(e){return r.delete("/follow/".concat(e)).then(function(e){return e.data})},getUserProfile:function(e){return console.warn("Obsolete method. Please use profileAPI object."),s.getUserProfile(e)}},i={getAuthUserData:function(){return r.get("/auth/me").then(function(e){return e.data})},getAuthUserPhoto:function(e){return r.get("/profile/"+e).then(function(e){return e.data.photos.small})},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("/auth/login",{email:e,password:t,rememberMe:n}).then(function(e){return e.data})},logout:function(){return r.delete("/auth/login").then(function(e){return e.data})}},s={getUserProfile:function(e){return r.get("/profile/".concat(e)).then(function(e){return e.data})},getStatus:function(e){return r.get("/profile/status/".concat(e)).then(function(e){return e.data})},updateStatus:function(e){return r.put("/profile/status",{status:e})}}},52:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return m});var a=n(2),r=n.n(a),o=n(10),i=n(4),s=n(5),u={profile:null,status:""},c=function(e){return{type:"SET_STATUS",status:e}},l=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.getUserProfile(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.getStatus(e);case 2:a=t.sent,n(c(a));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(c(e));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(i.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(i.a)({},e,{status:t.status});default:return e}}},53:function(e,t,n){"use strict";n.d(t,"b",function(){return i});var a=n(25),r=n(4),o={dialogs:[{id:1,name:"Nurik"},{id:2,name:"Bulat"},{id:3,name:"Islam"},{id:4,name:"Amir"},{id:5,name:"Zaman"}],messages:[{id:1,message:"Hey"},{id:2,message:"How is your learning React?"},{id:3,message:"Do u want some pizza?"},{id:4,message:"Do u want some pizza broo?"},{id:5,message:"Go CS bro"}]},i=function(e){return{type:"SEND-MESSAGE",message:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(r.a)({},e,{messages:Object(a.a)(e.messages).concat([{id:6,message:t.message}])});default:return e}}},58:function(e,t,n){e.exports=n.p+"static/media/spinner.f098b7c8.svg"},6:function(e,t,n){e.exports={nav:"Navbar_nav__279Ik",item:"Navbar_item__1Eq2s",active:"Navbar_active__27W0U",friends:"Navbar_friends__2Ed2N",friendsItem:"Navbar_friendsItem__1OPeL",friendName:"Navbar_friendName__7GVvS"}},63:function(e,t,n){e.exports=n(113)},68:function(e,t,n){},70:function(e,t,n){},73:function(e,t,n){e.exports=n.p+"static/media/reactjs-icon.70384772.svg"}},[[63,5,3]]]);
//# sourceMappingURL=main.c158891b.chunk.js.map